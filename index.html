<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IND vs USA | Jinx8004</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Consolas', monospace; }
        /* Native Video Styling */
        video { width: 100%; height: 100%; object-fit: contain; }
        
        /* Minimal HUD for Stats */
        #hud {
            position: absolute; top: 10px; left: 10px; background: rgba(0, 0, 0, 0.6);
            padding: 8px 12px; border-radius: 4px; color: #0f0; font-size: 12px;
            pointer-events: none; z-index: 10; border: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>

    <div id="hud">
        <b style="color:#fff">IND vs USA | Jinx8004</b><br>
        RES: <span id="stat-res">--</span> | FPS: <span id="stat-fps">--</span><br>
        LATENCY: <span id="stat-lat">--</span>s | BW: <span id="stat-bw">--</span> Mbps
    </div>

    <video id="video" controls autoplay crossorigin="anonymous"></video>

<script>
    const config = {
        manifest: 'https://a201aivottlinear-a.akamaihd.net/OTTB/lhr-nitro/clients/dash/enc/rlisfyx9vd/out/v1/61b8f61b22ac469297cbd4f1224f0ec8/cenc.mpd',
        keys: { 'f159241d40e659d58e81bc17ca30da31': '6b7fe24f7a16343bd447b0b30f68b7b2' }
    };

    async function init() {
        const video = document.getElementById('video');
        const player = new shaka.Player(video);

        player.configure({
            streaming: {
                bufferingGoal: 30,           // Pre-load 30s for stability
                rebufferingGoal: 5,          // Buffer 5s before starting
                presentationDelay: 20,       // Force 20s stable delay
                jumpLargeGaps: true
            },
            manifest: {
                dash: { 
                    ignoreMinBufferTime: true,
                    autoCorrectDrift: true 
                }
            },
            drm: { clearKeys: config.keys }
        });

        // Set high quality automatically to prevent buffering during resolution swaps
        player.addEventListener('variantchanged', () => {
            const tracks = player.getVariantTracks();
            const highest = tracks.sort((a, b) => b.bandwidth - a.bandwidth)[0];
            player.selectVariantTrack(highest, true);
        });

        try {
            await player.load(config.manifest);
            
            // Stats Update
            setInterval(() => {
                const stats = player.getStats();
                const tracks = player.getVariantTracks().find(t => t.active);
                const liveEdge = player.seekRange().end;
                
                document.getElementById('stat-res').innerText = tracks ? tracks.width + 'x' + tracks.height : '--';
                document.getElementById('stat-fps').innerText = tracks ? Math.round(tracks.frameRate) : '--';
                document.getElementById('stat-bw').innerText = (stats.estimatedBandwidth / 1000000).toFixed(2);
                document.getElementById('stat-lat').innerText = (liveEdge - video.currentTime).toFixed(1);

                // Auto-sync if it drifts too close to live
                if ((liveEdge - video.currentTime) < 10) {
                    video.currentTime = liveEdge - 20;
                }
            }, 1000);
            
        } catch (e) { console.error('Error:', e); }
    }

    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
