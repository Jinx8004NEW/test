<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IND vs USA | Jinx8004</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>

<style>
html,body{
    margin:0;height:100%;background:#000;overflow:hidden;
    font-family:Arial,Helvetica,sans-serif;
}
.player{
    position:relative;width:100%;height:100%;
}
video{
    width:100%;height:100%;object-fit:contain;background:#000;
}

/* HUD */
#hud{
    position:absolute;top:12px;left:12px;
    background:rgba(0,0,0,.55);
    padding:8px 12px;border-radius:6px;
    font-size:12px;color:#0f0;
    font-family:monospace;z-index:5;
}

/* Overlay */
.overlay{
    position:absolute;inset:0;
    display:flex;align-items:center;justify-content:center;
    pointer-events:none;
}
.play-btn{
    width:90px;height:90px;border-radius:50%;
    background:rgba(0,0,0,.6);
    display:flex;align-items:center;justify-content:center;
    font-size:40px;color:#fff;
    pointer-events:auto;cursor:pointer;
}

/* Controls */
.controls{
    position:absolute;bottom:0;left:0;right:0;
    padding:12px;
    background:linear-gradient(to top,rgba(0,0,0,.8),transparent);
    display:flex;align-items:center;gap:12px;
    opacity:0;transition:.3s;
}
.player:hover .controls{opacity:1}

.ctrl-btn{
    color:#fff;font-size:18px;cursor:pointer;
}
.time{
    color:#fff;font-size:14px;min-width:80px;
}
.seek{
    flex:1;
}
.seek input{width:100%}

/* Quality menu */
.quality{
    position:relative;
}
.menu{
    position:absolute;bottom:30px;right:0;
    background:#111;border-radius:6px;
    display:none;flex-direction:column;
}
.menu div{
    padding:8px 14px;color:#fff;
    cursor:pointer;font-size:14px;
}
.menu div:hover{background:#333}
</style>
</head>

<body>

<div class="player" id="player">

    <div id="hud">
        <b style="color:#fff">IND vs USA</b><br>
        RES: <span id="res">--</span> |
        FPS: <span id="fps">--</span><br>
        LAT: <span id="lat">--</span>s |
        BW: <span id="bw">--</span> Mbps
    </div>

    <video id="video" autoplay muted></video>

    <div class="overlay">
        <div class="play-btn" id="playBtn">▶</div>
    </div>

    <div class="controls">
        <div class="ctrl-btn" id="toggle">⏸</div>
        <div class="time" id="time">00:00</div>

        <div class="seek">
            <input type="range" min="0" max="100" value="0" id="seek">
        </div>

        <div class="quality">
            <div class="ctrl-btn" id="qBtn">⚙</div>
            <div class="menu" id="qMenu"></div>
        </div>
    </div>

</div>

<script>
const manifest = "https://a201aivottlinear-a.akamaihd.net/OTTB/lhr-nitro/clients/dash/enc/rlisfyx9vd/out/v1/61b8f61b22ac469297cbd4f1224f0res/cenc.mpd";
const keys = { "f159241d40e659d58e81bc17ca30da31":"6b7fe24f7a16343bd447b0b30f68b7b2" };

const video = document.getElementById("video");
const playBtn = document.getElementById("playBtn");
const toggle = document.getElementById("toggle");
const seek = document.getElementById("seek");

const player = new shaka.Player(video);

player.configure({
    drm:{ clearKeys: keys },
    streaming:{
        bufferingGoal:30,
        rebufferingGoal:5,
        presentationDelay:20
    }
});

async function init(){
    await player.load(manifest);
    buildQuality();
}
init();

/* Play / Pause */
function togglePlay(){
    video.paused ? video.play() : video.pause();
}
playBtn.onclick = togglePlay;
toggle.onclick = togglePlay;

video.onplay = ()=>{ playBtn.style.display="none"; toggle.textContent="⏸"; };
video.onpause= ()=>{ playBtn.style.display="flex"; toggle.textContent="▶"; };

/* Seek */
video.ontimeupdate = ()=>{
    const live = player.seekRange().end;
    seek.value = (video.currentTime / live) * 100;
};
seek.oninput = ()=>{
    const live = player.seekRange().end;
    video.currentTime = (seek.value/100)*live;
};

/* Quality */
function buildQuality(){
    const menu = document.getElementById("qMenu");
    const tracks = player.getVariantTracks().sort((a,b)=>b.height-a.height);
    tracks.forEach(t=>{
        const d = document.createElement("div");
        d.textContent = t.height+"p";
        d.onclick=()=>{
            player.selectVariantTrack(t,true);
            menu.style.display="none";
        };
        menu.appendChild(d);
    });
}
document.getElementById("qBtn").onclick=()=>{
    const m=document.getElementById("qMenu");
    m.style.display = m.style.display==="flex"?"none":"flex";
    m.style.flexDirection="column";
};

/* HUD */
setInterval(()=>{
    const s=player.getStats();
    const t=player.getVariantTracks().find(x=>x.active);
    const live=player.seekRange().end;

    res.textContent=t?t.width+"x"+t.height:"--";
    fps.textContent=t?Math.round(t.frameRate):"--";
    bw.textContent=(s.estimatedBandwidth/1e6).toFixed(2);
    lat.textContent=(live-video.currentTime).toFixed(1);

    if(live-video.currentTime<10) video.currentTime=live-20;
},1000);
</script>
</body>
</html>
