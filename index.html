<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IND vs USA | Jinx8004</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>
    <style>
        /* This fixes the alignment and prevents the 'weird' stretched look */
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; overflow: hidden; font-family: sans-serif; 
        }
        
        /* Flexbox centers the video perfectly */
        .video-container {
            display: flex; justify-content: center; align-items: center;
            width: 100vw; height: 100vh;
        }

        video { 
            max-width: 100%; max-height: 100%; 
            background: #000; 
        }

        /* Technical HUD - Cleaned up */
        #hud {
            position: absolute; top: 15px; left: 15px; background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px; border-radius: 6px; color: #0f0; font-size: 12px;
            pointer-events: none; z-index: 100; border: 1px solid rgba(255,255,255,0.1);
            font-family: monospace;
        }
    </style>
</head>
<body>

    <div id="hud">
        <b style="color:#fff">IND vs USA | Jinx8004</b><br>
        RES: <span id="stat-res">--</span> | FPS: <span id="stat-fps">--</span><br>
        LATENCY: <span id="stat-lat">--</span>s | BW: <span id="stat-bw">--</span> Mbps
    </div>

    <div class="video-container">
        <video id="video" controls autoplay crossorigin="anonymous"></video>
    </div>

<script>
    const config = {
        manifest: 'https://a201aivottlinear-a.akamaihd.net/OTTB/lhr-nitro/clients/dash/enc/rlisfyx9vd/out/v1/61b8f61b22ac469297cbd4f1224f0res/cenc.mpd',
        keys: { 'f159241d40e659d58e81bc17ca30da31': '6b7fe24f7a16343bd447b0b30f68b7b2' }
    };

    async function init() {
        const video = document.getElementById('video');
        const player = new shaka.Player(video);

        player.configure({
            streaming: {
                bufferingGoal: 30,
                rebufferingGoal: 5,
                presentationDelay: 20, // 20s stability gap
                jumpLargeGaps: true
            },
            manifest: { dash: { ignoreMinBufferTime: true, autoCorrectDrift: true } },
            drm: { clearKeys: config.keys }
        });

        // Ensure highest quality is locked for 1080p
        player.addEventListener('variantchanged', () => {
            const tracks = player.getVariantTracks().sort((a, b) => b.bandwidth - a.bandwidth);
            player.selectVariantTrack(tracks[0], true);
        });

        try {
            await player.load(config.manifest);
            
            setInterval(() => {
                const stats = player.getStats();
                const tracks = player.getVariantTracks().find(t => t.active);
                const liveEdge = player.seekRange().end;
                
                document.getElementById('stat-res').innerText = tracks ? tracks.width + 'x' + tracks.height : '--';
                document.getElementById('stat-fps').innerText = tracks ? Math.round(tracks.frameRate) : '--';
                document.getElementById('stat-bw').innerText = (stats.estimatedBandwidth / 1000000).toFixed(2);
                document.getElementById('stat-lat').innerText = (liveEdge - video.currentTime).toFixed(1);

                if ((liveEdge - video.currentTime) < 10) {
                    video.currentTime = liveEdge - 20;
                }
            }, 1000);
            
        } catch (e) { console.error(e); }
    }

    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
