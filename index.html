<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IND vs USA Jinx8004</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/controls.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.ui.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Consolas', monospace; }
        .container { width: 100%; height: 100%; }
        video { width: 100%; height: 100%; }
        #hud {
            position: absolute; top: 10px; left: 10px; background: rgba(0, 0, 0, 0.5);
            padding: 10px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);
            color: #0f0; font-size: 12px; pointer-events: none; z-index: 100;
        }
    </style>
</head>
<body>

    <div id="hud">
        <div style="color:#fff; font-weight:bold; border-bottom:1px solid #444; margin-bottom:5px">IND vs USA | Jinx8004</div>
        <div>RES: <span id="stat-res">0x0</span></div>
        <div>FPS: <span id="stat-fps">0</span></div>
        <div>BW:  <span id="stat-bw">0</span> Mbps</div>
    </div>

    <div class="container" data-shaka-player-container>
        <video data-shaka-player id="video" autoplay crossorigin="anonymous"></video>
    </div>

<script>
    const config = {
        manifest: 'https://a201aivottlinear-a.akamaihd.net/OTTB/lhr-nitro/clients/dash/enc/rlisfyx9vd/out/v1/61b8f61b22ac469297cbd4f1224f0ec8/cenc.mpd',
        keys: { 'f159241d40e659d58e81bc17ca30da31': '6b7fe24f7a16343bd447b0b30f68b7b2' }
    };

    async function init() {
        const video = document.getElementById('video');
        const player = new shaka.Player(video);
        const ui = new shaka.ui.Overlay(player, video.parentElement, video);

        player.configure({
            streaming: {
                bufferingGoal: 4,            // Small buffer to prevent stutter
                rebufferingGoal: 1,          // Start quickly
                lowLatencyMode: true,
                jumpLargeGaps: true,
                abr: { enabled: false },      // Disable ABR to stop quality-switch buffering
                infiniteMaxBeforeEdge: 1,    // Stay as close to live as possible
                inaccurateManifestTolerance: 2
            },
            manifest: {
                dash: {
                    ignoreMinBufferTime: true,
                    ignoreSuggestedPresentationDelay: true // FORCES player to skip the 1-min wait
                }
            },
            drm: { clearKeys: config.keys }
        });

        ui.configure({
            'controlPanelElements': ['play_pause', 'time_and_duration', 'spacer', 'mute', 'volume', 'fullscreen', 'overflow_menu'],
            'overflowMenuButtons': ['quality'] 
        });

        try {
            await player.load(config.manifest);
            // Force the video to the absolute live edge
            video.currentTime = video.duration; 

            setInterval(() => {
                const stats = player.getStats();
                const tracks = player.getVariantTracks().find(t => t.active);
                if (tracks) {
                    document.getElementById('stat-res').innerText = `${tracks.width}x${tracks.height}`;
                    document.getElementById('stat-fps').innerText = Math.round(tracks.frameRate || 0);
                    document.getElementById('stat-bw').innerText = (stats.estimatedBandwidth / 1000000).toFixed(2);
                }
            }, 1000);
        } catch (e) { console.error(e); }
    }

    document.addEventListener('shaka-ui-loaded', init);
</script>
</body>
</html>
